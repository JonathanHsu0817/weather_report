import{u as k,w as E,a as T,o as l,c as n,b as c,d as $,e,t as s,F as x,r as w,f as D,g as o,A as i,h as C,i as f,S as V}from"./index-0a95bbe3.js";const O={class:"flex flex-col flex-1 items-center"},A={key:0,class:"text-white p-4 bg-weather-secondary w-full text-center"},L=e("p",null,'You are currently previewing this city, click the "+" icon to start tracking this city.',-1),N=[L],R={class:"flex flex-col items-center text-white py-12"},M={class:"text-4xl mb-2"},B={class:"text-sm mb-12"},P={class:"text-8xl mb-8"},q={class:"capitalize"},z=["src"],F=e("hr",{class:"border-white border-opacity-10 border w-full"},null,-1),H={class:"max-w-screen-md w-full py-12"},I={class:"mx-8 text-white"},W=e("h2",{class:"mb-4"},"Hourly Weather",-1),j={class:"flex gap-10 overflow-x-scroll"},Y={class:"whitespace-nowrap text-md"},J=["src"],K={class:"text-xl"},U=e("hr",{class:"border-white border-opacity-10 border w-full"},null,-1),G={class:"max-w-screen-md w-full py-12"},Q={class:"mx-8 text-white"},X=e("h2",{class:"mb-4"},"7 Day Forecast",-1),Z={class:"flex-1"},ee=["src"],te={class:"flex gap-2 flex-1 justify-end"},se={__name:"AsyncCityView",async setup(m){let d,h;const{VITE_OPEN_WEATHER_KEY:g}={VITE_OPEN_WEATHER_KEY:"a4f22b5d55afd492e8e5ec0c1c84f6d8",BASE_URL:"/weather_report/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},_=k(),y=async()=>{try{const a=await D.get(`https://api.openweathermap.org/data/3.0/onecall?lat=${_.query.lat}&lon=${_.query.lng}&exclude={part}&appid=${g}&units=metric`),p=new Date().getTimezoneOffset()*6e4,t=a.data.current.dt*1e3+p;return a.data.currentTime=t+1e3*a.data.timezone_offset,a.data.hourly.forEach(u=>{const S=u.dt*1e3+p;u.currentTime=S+1e3*a.data.timezone_offset}),await new Promise(u=>setTimeout(u,500)),a.data}catch(a){console.log(a)}},r=([d,h]=E(()=>y()),d=await d,h(),d),v=T(),b=()=>{const p=JSON.parse(localStorage.getItem("savedCities")).filter(t=>t.id!==_.query.id);localStorage.setItem("savedCities",JSON.stringify(p)),v.push({name:"home"})};return(a,p)=>(l(),n("div",O,[c(_).query.preview?(l(),n("div",A,N)):$("",!0),e("div",R,[e("h1",M,s(c(_).params.city),1),e("p",B,s(new Date(c(r).currentTime).toLocaleDateString("en-us",{weekday:"short",day:"2-digit",month:"long"}))+" "+s(new Date(c(r).currentTime).toLocaleTimeString("en-us",{timeStyle:"short"})),1),e("p",P,s(Math.round(c(r).current.temp))+"° ",1),e("p",null," Feels like "+s(Math.round(c(r).current.feels_like))+" ° ",1),e("p",q,s(c(r).current.weather[0].description),1),e("img",{class:"w-[150px] h-auto",src:`http://openweathermap.org/img/wn/${c(r).current.weather[0].icon}@2x.png`,alt:""},null,8,z)]),F,e("div",H,[e("div",I,[W,e("div",j,[(l(!0),n(x,null,w(c(r).hourly,t=>(l(),n("div",{key:t.dt,class:"flex flex-col gap-4 items-center"},[e("p",Y,s(new Date(t.currentTime).toLocaleTimeString("en-us",{hour:"numeric"})),1),e("img",{class:"w-auto h-[50px] object-cover",src:`http://openweathermap.org/img/wn/${t.weather[0].icon}@2x.png`,alt:""},null,8,J),e("p",K,s(Math.round(t.temp))+"° ",1)]))),128))])])]),U,e("div",G,[e("div",Q,[X,(l(!0),n(x,null,w(c(r).daily,t=>(l(),n("div",{key:t.dt,class:"flex items-center"},[e("p",Z,s(new Date(t.dt*1e3).toLocaleDateString("en-us",{weekday:"long"})),1),e("img",{class:"w-[50px] h-[50px] object-cover",src:`http://openweathermap.org/img/wn/${t.weather[0].icon}@2x.png`,alt:""},null,8,ee),e("div",te,[e("p",null,"H: "+s(Math.round(t.temp.max)),1),e("p",null,"L: "+s(Math.round(t.temp.min)),1)])]))),128))])]),e("div",{class:"flex items-center gap-2 py-12 text-white cursor-pointer duration-150 hover:text-red-500"},[e("span",{class:"material-icons",onClick:b}," delete ")])]))}},ae={class:"flex flex-col flex-1"},ce={class:"flex flex-col py-12 items-center"},oe={class:"flex flex-col py-12 px-8 items-center"},le={class:"flex flex-col py-12 px-8 items-center"},re={__name:"CityViewSkeleton",setup(m){return(d,h)=>(l(),n("div",ae,[e("div",ce,[o(i,{class:"max-w-[300px] w-full mb-2"}),o(i,{class:"max-w-[300px] w-full mb-12"}),o(i,{class:"max-w-[300px] h-[100px] w-full mb-12"}),o(i,{class:"max-w-[300px] w-full mb-8"}),o(i,{class:"max-w-[300px] h-[75px] w-full"})]),e("div",oe,[o(i,{class:"max-w-screen-md h-[100px] w-full mb-12"})]),e("div",le,[o(i,{class:"max-w-screen-md h-[100px] w-full mb-12"})])]))}},ne={class:""},de={__name:"CityView",setup(m){return(d,h)=>(l(),n("div",ne,[(l(),C(V,null,{fallback:f(()=>[o(re)]),default:f(()=>[o(se)]),_:1}))]))}};export{de as default};
